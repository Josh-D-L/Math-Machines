<!DOCTYPE HTML>

<head>
	<link rel="canonical" href="https://josh-d-l.github.io/Math-Machines/Machines/Graph-Creator" />
	<style>
	.spoiler {
		background-color: #A0A0A0;
		display: inline;
		position: fixed;
		right: 25px;
		top: 20px;
	}
	canvas {
		top: 50%;
		left: 50%;
		margin-top: -250px;
		margin-left: -250px;
		position: fixed;
		display: block;
	}
	</style>
	<title>Graph Creator</title>
	<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
</head>

<BODY>
	<H1 style="text-align:center" id="title">Graph Creator</H1>
	<p>
		Currently only works for linear equations
	</p>
	<canvas id="diagram" width="500" height="500" style="border:1px solid #000000;" title="Diagram">Your browswer does not support canvas.</canvas>
	<br>
	<input type="text" id="variable" style="width: 12px" title="Variable" onChange="changeVariable();" value="x">
	<br>
	y&nbsp;=&nbsp;<input type="text" class="Sign" style="width: 12px" title="+ / -" value="+"><input type="text" style="width: 24px" id="Coefficient" title="Coefficient"><span class="VariableA">x</span>&nbsp;<input type="text" class="Sign" style="width: 12px" title="+ / -" value="+"></input>&nbsp;<input type="text" style="width: 24px" id="Constant" title="Constant">
	<br>
	<button type="button" onclick="submit()">Submit</button>
	<script>
	  function submit() {
	    if (document.getElementsByClassName("Sign")[0].value == "+") {
	    	var slope = document.getElementById("Coefficient").value;
	    } else {
	    	var slope = -Number(document.getElementById("Coefficient").value);
	    }
	    if (document.getElementsByClassName("Sign")[1].value == "+") {
	    	var yIntercept = document.getElementById("Constant").value;
	    } else {
	    	var yIntercept = -Number(document.getElementById("Constant").value);
	    }
	    var diagram = document.getElementById("diagram");
	    var draw = diagram.getContext("2d");
	    diagram.width = diagram.width
	    diagram.style.backgroundColor = document.getElementById("Diagram Background Color").value;
	    draw.strokeStyle = document.getElementById("Line Color").value;
	    var scaleY = slope * document.getElementById("xVal").value;
	    scaleY = Number(scaleY);
	    scaleY = diagram.height / scaleY;
	    var scaleX = diagram.width / document.getElementById("xVal").value;
	    var scale = Math.min(scaleY, scaleX);
	    for (var x = scale; x < diagram.width; x += scale) {
	    	draw.moveTo(x, 0);
	    	draw.lineTo(x, diagram.height);
	    	draw.stroke();
	    }
	    for (var x = scale; x < diagram.height; x += scale) {
	    	draw.moveTo(0, x);
	    	draw.lineTo(diagram.width, x);
	    	draw.stroke();
	    }
	    var pointA = [0, diagram.height - scale * Number(yIntercept)];
	    var pointB = [Number(document.getElementById("xVal").value) * scale, diagram.height - (scale * Number(yIntercept) + scale * Number(slope) * Number(document.getElementById("xVal").value))];
	    draw.moveTo(pointA[0], pointA[1]);
	    draw.lineTo(pointB[0], pointB[1]);
	    draw.stroke();
	  }
	  function changeVariable() {
		for (var x = 0; x < document.getElementsByClassName("VariableA").length; x++) {
			var Variable = document.getElementById("variable").value;
			document.getElementsByClassName("VariableA")[x].innerText = Variable;
		}
	}
	</script>
	<H5 style="position: fixed; bottom: 0px; right: 25px; color: #000000" id="mine">
		Copyright Josh Lawson
	</H5>
	<button type="button" style="position: fixed; right: 25px; top: 0px" id="spoilerShow" onclick="toggleDisplay()">Settings</button>
	<br>
	<br>
	<div class="spoiler" onmouseout="hide()" id="spoiler" style="display: none;">
		<input type="color" id="Background Color" onchange="backgroundColor()"/>
		Background Color
		<br>
		<input type="color" id="Text Color" onchange="textColor()"/>
		Text Color
		<br>
		<input type="color" id="Title Color" onchange="titleColor()"/>
		Title Color
		<br>
		<input type="number" id="Font Size" onchange="fontSize()" style="width: 45px" value="16" min="1" max="100"/>
		Font Size (px)
		<br>
		<input type="color" id="Line Color" onchange="submit()">
		Diagram Line Color
		<br>
		<input type="color" id="Diagram Background Color" onchange="submit()">
		Diagram Background Color
		<br>
		<input type="number" id="Height/Width" onchange="heightWidth()" value="500" style="width: 45px" min="1">
		Diagram Height / Width (px)
		<br>
		<input type="number" id="xVal" value="5" style="width: 45px" min="1" onchange="submit()">
		Minimum units on x axis
		<br>
		<button type="button" onclick="reset()">Reset Settings</button>
	</div>
	<script src="https://josh-d-l.github.io/Settings.js"></script>
	<script>
		function reassign() {
			document.getElementById("Diagram Background Color").value = "#FFFFFF";
			var reset_string = reset.toString(); 
			reset_string = reset_string.slice(0, reset_string.indexOf("}"));
			reset_string += 'document.getElementById("Diagram Background Color").value = "#FFFFFF";';
			reset_string += 'document.getElementById("Line Color").value = "#000000";';
			reset_string += 'document.getElementById("Height/Width").value = "500";';
			reset_string += 'document.getElementById("xVal").value = "5";';
			reset_string += "}"; 
			console.log(reset_string);
			eval(reset_string);
			function heightWidth() {
				var diagram = document.getElementById("diagram");
				diagram.width = document.getElementById("Height/Width").value;
				diagram.height = document.getElementById("Height/Width").value;
				diagram.style.marginTop = (-diagram.height / 2) + "px";
				diagram.style.marginLeft = (-diagram.width / 2) + "px";
				submit();
			}
			var endSession_string = endSession.toString(); 
			endSession_string = endSession_string.slice(0, endSession_string.indexOf("}"));
			endSession_string += 'localStorage.setItem("Line Color", document.getElementById("Line Color").value);';
			endSession_string += 'localStorage.setItem("Diagram Background Color", document.getElementById("Diagram Background Color").value);';
			endSession_string += 'localStorage.setItem("Height/Width", document.getElementById("Height/Width").value);';
			endSession_string += 'localStorage.setItem("xVal", document.getElementById("xVal").value);';
			endSession_string += "}";
			console.log(endSession_string);
			eval(endSession_string);
			var settings_string = settings.toString(); 
			settings_string = settings_string.slice(0, settings_string.indexOf("}"));
			settings_string += 'document.getElementById("Line Color").value = localStorage.getItem("Line Color");';
			settings_string += 'if (localStorage.getItem("Diagram Background Color") != null) {';
			settings_string += 'document.getElementById("Diagram Background Color").value = localStorage.getItem("Diagram Background Color");}';
			settings_string += 'document.getElementById("Height/Width").value = localStorage.getItem("Height/Width");';
			settings_string += 'document.getElementById("xVal").value = localStorage.getItem("xVal");';
			settings_string += 'submit();';
			settings_string += "}";
			console.log(settings_string);
			eval(settings_string);
		}
	</script>
	<div style="position: fixed; bottom: 0px; left: 0px; color: #000000">
		<a href="https://josh-d-l.github.io/Math-Machines/" style="font-size: 200%;">Home Page</a>
 	</div>
</BODY>

</HTML>
